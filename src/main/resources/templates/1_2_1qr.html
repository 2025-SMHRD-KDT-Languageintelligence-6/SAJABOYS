<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>í€´ì¦ˆ ë¯¸ì…˜ | ì¶”ì ì</title>

  <!-- Verti ê¸°ë³¸ CSS -->
  <link rel="stylesheet" href="assets/css/main.css" />

  <style>
    body{
      background:#fdfdfd;
    }
    .mission-wrap{
      min-height:100dvh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:2rem 1rem;
    }
    .mission-card{
      width:100%;
      max-width:900px;
      background:#fff;
      border-radius:20px;
      box-shadow:0 6px 18px rgba(0,0,0,.12);
      padding:2.5rem 2rem 2rem;
      position:relative;
    }
    .mission-title{
      font-size:2.4rem;
      font-weight:800;
      margin-bottom:1.5rem;
    }
    .mission-sub{
      font-size:.95rem;
      color:#777;
      margin-bottom:.75rem;
    }

    /* ì ìˆ˜ íšë“ ë°°ì§€ */
    .score-badge{
      position:absolute;
      top:1rem;
      right:1rem;
      background:#ffeb3b;
      border-radius:999px;
      padding:.4rem 1.1rem;
      font-weight:800;
      box-shadow:0 4px 10px rgba(0,0,0,.15);
      font-size:.9rem;
    }

    /* ë¬¸ì œ ì˜ì—­ */
    .question-box{
      background:#e67923;
      color:#fff;
      border-radius:10px;
      padding:1.4rem 1.6rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:1rem;
      margin-bottom:1.5rem;
      font-size:1.3rem;
      font-weight:700;
    }
    .question-box strong{
      text-decoration:underline;
    }

    .clue-btn{
      background:#ffeb3b;
      color:#000;
      border-radius:6px;
      padding:.4rem .7rem;
      font-weight:800;
      cursor:pointer;
      border:2px solid #000;
      display:inline-flex;
      align-items:center;
      gap:.4rem;
      white-space:nowrap;
    }

    .clue-btn::before{
      content:"âœ‰";
      font-size:1.2rem;
    }

    /* ë§í’ì„  íŒíŠ¸ */
    .hint-bubble{
      position:absolute;
      top:4.5rem;
      right:3rem;
      max-width:220px;
      background:#00a6d6;
      color:#fff;
      padding:.8rem 1rem;
      border-radius:20px;
      font-size:.9rem;
      display:none;
    }
    .hint-bubble::after{
      content:"";
      position:absolute;
      bottom:-14px;
      right:25px;
      border-width:14px 10px 0 10px;
      border-style:solid;
      border-color:#00a6d6 transparent transparent transparent;
    }

    /* YES / NO ë²„íŠ¼ */
    .btn-row{
      display:flex;
      gap:2rem;
      justify-content:center;
      margin-top:2.2rem;
      margin-bottom:1.2rem;
    }
    .big-btn{
      flex:1;
      max-width:260px;
      border-radius:30px;
      font-size:2rem;
      padding:1rem 0;
      font-weight:700;
      border:none;
      cursor:pointer;
      color:#fff;
    }
    .btn-yes{
      background:#00a6ff;
    }
    .btn-no{
      background:#e66427;
    }
    .big-btn:disabled{
      opacity:.5;
      cursor:default;
    }

    .result-text{
      text-align:center;
      font-weight:700;
      font-size:1.1rem;
      min-height:1.4rem;
    }

    .back-wrap{
      text-align:center;
      margin-top:1.5rem;
    }
    .back-btn{
      font-size:.95rem;
      padding:.5rem 1.3rem;
    }

    @media (max-width:736px){
      .mission-card{
        padding:1.8rem 1.3rem 1.5rem;
      }
      .mission-title{
        font-size:1.8rem;
      }
      .btn-row{
        flex-direction:column;
        align-items:center;
      }
      .hint-bubble{
        right:1.5rem;
      }
    }
  </style>
</head>
<body class="is-preload">

<div class="mission-wrap">
  <section class="mission-card">

    <!-- í˜„ì¬ ì ìˆ˜ / ìƒˆ ì ìˆ˜ ì•ˆë‚´ -->
    <div class="score-badge">
      ë‚´ ì ìˆ˜: <span id="currentScore">0</span>ì 
    </div>

    <!-- ë§í’ì„  íŒíŠ¸ -->
    <div id="hintBubble" class="hint-bubble">
      ìˆœì²œì˜ ì¸êµ¬ìˆ˜ëŠ” <strong>28ë§Œ ëª…</strong>ì´ë‹¤.
    </div>

    <header>
      <p class="mission-sub">ë¯¸ì…˜!!</p>
      <h1 class="mission-title">í€´ì¦ˆ ë¯¸ì…˜</h1>
    </header>

    <!-- ë¬¸ì œ ë°•ìŠ¤ -->
    <div class="question-box">
      <div>ìˆœì²œì˜ ì¸êµ¬ìˆ˜ëŠ” <strong>20ë§Œëª… ì´í•˜ì´ë‹¤.</strong></div>
      <button type="button" class="clue-btn" id="clueBtn">ë‹¨ì„œ ì‚¬ìš©í•˜ê¸°</button>
    </div>

    <!-- YES / NO ë²„íŠ¼ -->
    <div class="btn-row">
      <button type="button" class="big-btn btn-yes" id="yesBtn">YES</button>
      <button type="button" class="big-btn btn-no" id="noBtn">NO</button>
    </div>

    <!-- ê²°ê³¼ í…ìŠ¤íŠ¸ -->
    <div id="resultText" class="result-text"></div>

    <!-- ì´ì „ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸° -->
    <div class="back-wrap">
      <button type="button" class="button alt back-btn" id="backBtn">
        ì´ì „ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
      </button>
    </div>
  </section>
</div>

<script>
  /*****************
   * 0. ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
   *   - ë©”ì¸ ê²Œì„ í˜ì´ì§€ì—ì„œ
   *     localStorage.setItem('gameScore', ê°’);
   *     í˜•íƒœë¡œ ì €ì¥í•´ë’€ë‹¤ê³  ê°€ì •
   *****************/
  const scoreKey = 'gameScore';
  const scoreGain = 500; // ì •ë‹µì‹œ íšë“ ì ìˆ˜
  const scoreSpan = document.getElementById('currentScore');

  function getScore(){
    return parseInt(localStorage.getItem(scoreKey) || '0', 10);
  }
  function setScore(v){
    localStorage.setItem(scoreKey, String(v));
    scoreSpan.textContent = v;
  }
  setScore(getScore());

  /*****************
   * 1. ë‹¨ì„œ ë§í’ì„ 
   *****************/
  const clueBtn   = document.getElementById('clueBtn');
  const hintBubble = document.getElementById('hintBubble');
  let hintShown = false;

  clueBtn.addEventListener('click', () => {
    hintShown = !hintShown;
    hintBubble.style.display = hintShown ? 'block' : 'none';
  });

  /*****************
   * 2. YES / NO ì •ë‹µ ì²´í¬
   *    - ì‹¤ì œ ì‚¬ì‹¤: ì¸êµ¬ìˆ˜ëŠ” 20ë§Œëª… ì´í•˜ê°€ ì•„ë‹˜(ì˜ˆì‹œ: 28ë§Œëª…) â†’ ì •ë‹µì€ NO
   *****************/
  const yesBtn = document.getElementById('yesBtn');
  const noBtn  = document.getElementById('noBtn');
  const resultText = document.getElementById('resultText');
  let answered = false;

  function handleAnswer(isYes){
    if(answered) return;
    answered = true;

    yesBtn.disabled = true;
    noBtn.disabled  = true;

    const correctIsYes = false; // ì´ ë¬¸ì œì˜ ì •ë‹µì€ NO
    const isCorrect = (isYes === correctIsYes);

    if(isCorrect){
      const newScore = getScore() + scoreGain;
      setScore(newScore);
      resultText.style.color = '#0c8c3a';
      resultText.textContent = `ì •ë‹µì…ë‹ˆë‹¤! +${scoreGain}ì  íšë“ ğŸ‰`;
    }else{
      resultText.style.color = '#e02626';
      resultText.textContent = 'ì•„ì‰½ì§€ë§Œ ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ìŒ ë¯¸ì…˜ì„ ë…¸ë ¤ë³´ì„¸ìš”!';
    }
  }

  yesBtn.addEventListener('click', () => handleAnswer(true));
  noBtn .addEventListener('click', () => handleAnswer(false));

  /*****************
   * 3. ì´ì „ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
   *****************/
  document.getElementById('backBtn').addEventListener('click', () => {
    // history.back()ì´ ì—†ì„ ë•Œë¥¼ ëŒ€ë¹„í•´ fallback ê²½ë¡œë„ ì¤„ ìˆ˜ ìˆìŒ
    if(document.referrer){
      history.back();
    }else{
      // ì˜ˆ: ë©”ì¸ ê²Œì„ ì‹¤í–‰ í˜ì´ì§€ë¡œ
      window.location.href = 'game-running.html'; // íŒŒì¼ ì´ë¦„ì— ë§ê²Œ ìˆ˜ì •
    }
  });
</script>

</body>
</html>
